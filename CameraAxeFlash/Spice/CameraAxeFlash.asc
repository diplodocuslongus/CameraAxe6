Version 4
SHEET 1 908 756
WIRE -304 -128 -352 -128
WIRE -144 -128 -224 -128
WIRE -96 -128 -144 -128
WIRE 0 -128 -32 -128
WIRE 128 -128 0 -128
WIRE 448 -128 128 -128
WIRE 448 -112 448 -128
WIRE 128 -96 128 -128
WIRE -352 -64 -352 -128
WIRE 0 -64 0 -128
WIRE -144 -48 -144 -128
WIRE -64 -16 -64 -48
WIRE -144 0 -144 -48
WIRE 128 16 128 -16
WIRE 224 16 128 16
WIRE 272 16 224 16
WIRE 448 16 448 -32
WIRE -352 32 -352 16
WIRE -352 32 -464 32
WIRE 128 32 128 16
WIRE -352 48 -352 32
WIRE 224 48 224 16
WIRE -464 64 -464 32
WIRE -192 80 -240 80
WIRE -144 128 -144 96
WIRE -64 128 -64 48
WIRE -64 128 -144 128
WIRE 0 128 0 0
WIRE 0 128 -64 128
WIRE 128 128 128 112
WIRE 128 128 0 128
WIRE 224 128 224 112
WIRE 224 128 128 128
WIRE 448 128 448 80
WIRE -832 144 -848 144
WIRE -624 144 -752 144
WIRE -464 144 -464 128
WIRE -352 144 -352 128
WIRE -352 144 -464 144
WIRE -848 160 -848 144
WIRE 0 160 0 128
WIRE -352 176 -352 144
WIRE -624 208 -624 144
WIRE -592 208 -624 208
WIRE -496 208 -528 208
WIRE 400 208 304 208
WIRE -592 224 -624 224
WIRE -832 272 -848 272
WIRE -624 272 -624 224
WIRE -624 272 -752 272
WIRE -496 272 -496 208
WIRE -416 272 -496 272
WIRE -240 272 -240 80
WIRE -240 272 -320 272
WIRE 448 272 448 224
WIRE -848 288 -848 272
WIRE -416 320 -496 320
WIRE 304 336 304 208
WIRE -832 416 -848 416
WIRE -496 416 -496 320
WIRE -496 416 -752 416
WIRE -848 432 -848 416
WIRE 304 432 304 416
FLAG 0 160 0
FLAG -352 176 0
FLAG 272 16 VT0
IOPIN 272 16 Out
FLAG -848 160 0
FLAG -848 288 0
FLAG -848 432 0
FLAG 448 272 0
FLAG 304 432 0
SYMBOL voltage -352 -80 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 44 Left 2
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL ind -320 -112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 100µ
SYMATTR SpiceLine Ipk=3 Rser=180m Rpar=0 Cpar=0
SYMBOL schottky -96 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value RB058L150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL polcap -16 -64 R0
WINDOW 3 24 56 Left 2
SYMATTR Value 100µ
SYMATTR InstName C1
SYMATTR Description Capacitor
SYMATTR Type cap
SYMATTR SpiceLine V=250 Rser=100m Lser=0
SYMBOL nmos -192 0 R0
SYMATTR InstName M1
SYMATTR Value IRFP250N
SYMBOL Digital\\and -560 160 R0
WINDOW 3 0 0 Invisible 2
SYMATTR Value Vhigh=5
SYMATTR InstName A1
SYMBOL Digital\\srflop -368 224 R0
WINDOW 3 -49 149 Left 2
SYMATTR Value Vhigh=5, ic=0, Ref=2.5, Td=10n
SYMATTR InstName A2
SYMBOL bv -736 144 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B1
SYMATTR Value V=if(V(VT0)<2.9, 5, 0) ; V Limit
SYMBOL bv -736 272 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B2
SYMATTR Value V=if(I(R3)<0.1m, 5, 0) ; Flux Reset
SYMBOL bv -736 416 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B3
SYMATTR Value V=if(I(R3)>2, 5, 0) ; Max I current
SYMBOL res 112 -112 R0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL res 112 16 R0
SYMATTR InstName R2
SYMATTR Value 20K
SYMBOL cap 208 48 R0
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL cap -480 64 R0
SYMATTR InstName C3
SYMATTR Value 0.1µ
SYMBOL res -336 144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 0.1
SYMBOL res 432 -128 R0
SYMATTR InstName R4
SYMATTR Value 5
SYMBOL nmos 400 128 R0
SYMATTR InstName M2
SYMATTR Value irfs4227pbf
SYMATTR Prefix X
SYMBOL voltage 304 320 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 44 Left 2
WINDOW 3 -137 152 Left 2
SYMATTR Value PULSE(0 12 .12 0 0 50u)
SYMATTR InstName V2
SYMBOL cap -80 -16 R0
SYMATTR InstName C4
SYMATTR Value 0.1µ
SYMBOL res -48 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10K
SYMBOL LED 432 16 R0
SYMATTR InstName D2
SYMATTR Value CMA255072WHT
TEXT -592 -248 Left 2 !.tran 0 .15 0
TEXT 0 208 Left 2 ;C1 scaled /10\nto reduce simulation time
TEXT -928 520 Left 2 ;Voltage logic, and gate, and flipflop all simulated by microcontroller
TEXT 608 -208 Left 2 !.lib CMA3090-72VSpice.txt
TEXT 608 -168 Left 2 !.lib irfs4227pbf.spi
TEXT 608 -128 Left 2 !.lib TC4420_I2D_B.mod
