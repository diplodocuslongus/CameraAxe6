<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Camera Axe 6</title>
<!--Global Style-->
		<style>
			body{
				font-family: "arial";
				background-color: white;
			}
			button{
				padding: 12px;
				text-align: left;
				font-size: 20px;
			}
			.mainBox{
				width: 450px;
				height: 650px;
				padding: 12px;
				border: 1px solid #000;
			}
			.topText{
				float: left;
			}
			.topButton{
				float: right;
				margin-top:12px;
			}
		</style>
<!--Global Script-->
		<script>
			var gRequest;
			var gSinglePage = false;
			window.onload = initPage;
			
			function initPage() {
				if (gSinglePage) {
					loadPage("Home.html");
				}
				updateDynamicState();
			}

			function updateDynamicState() {
				setTimeout(updateDynamicState, 5000);
				document.getElementById("debugText").innerHTML = "Done";
				if (document.getElementById("MenuMode") != null &&
					document.getElementById("MenuMode").style.display != "none") {
					gRequest = new XMLHttpRequest();
					gRequest.onreadystatechange = updateIds;
					gRequest.open("GET", "updateAll", true);
					gRequest.send();
				}
			}

			function updateIds() {
				if ((gRequest.readyState == 4) && (gRequest.status == 200)) {
					var str = gRequest.responseText;
					var indexPrev = -1;
					do {
						var index0 = str.indexOf("~", indexPrev+1);
						var index1 = str.indexOf("~", index0+1)
						if (index1 != -1) {
							var id = str.substring(indexPrev+1, index0);
							var val = str.substring(index0+1, index1);
							document.getElementById(id).innerHTML = val;
							indexPrev = index1;
						}
					} while (indexPrev != str.lastIndexOf("~"));
				}
			}

			function loadPage(page) {
				if (gSinglePage) {
					document.getElementById("Home").style.display = "none";
					document.getElementById("MenuMode").style.display = "none";
					document.getElementById("CameraFlash").style.display = "none";
					document.getElementById("Advanced").style.display = "none";
					document.getElementById("Intervalometer").style.display = "none";
					var s = page.substring(0, page.length-5); // Remove .html which will match div id
					document.getElementById(s).style.display = "block";
				} else {
					document.location.href=page;
				}
			}
			function validateNumber(number,maxLength) {
				if (number.value.length > maxLength) {
					number.value = number.value.slice(0,maxLength); 
				}
				if (number.value.length > 1 && number.value[0]==0){
					number.value = (number.value).replace("0","");
				}
				if (number.value < 0 || number.value=="") {
					number.value = 0;
				}
				if (+number.value > +number.max) {
					number.value = number.max;
				}
			}
		</script>		
	</head>
	<body>
<!--Home Page (Start)-->
		<div id="Home" class="mainBox">
			<style>
			.fullWidth{
				width: 100%;
			}
			#listButtons{
				padding: 12px;
				text-align: left;
				font-size: 20px;
			}
			</style>
			<h1 class="topText">Camera Axe Home - v<span id="version"></span></h1>
			
			<button onclick="loadPage('CameraFlash.html');">Camera Flash Settings</button>
			
			<h2>Menus</h2>
			<div id="listButtons"></div><br><br>
			
			<button onclick="loadPage('Advanced.html');">Advanced</button>
			<script>
				function DebugInit(version, photoMenus) {
					document.getElementById("version").innerHTML = version;
					var listItems = "";
					for(i=0; i<photoMenus.length; i++){
						listItems += "<button class=\"fullWidth\" onclick=\"loadPage('MenuMode.html');\">"+photoMenus[i]+"</button>";
					}
					document.getElementById("listButtons").innerHTML = listItems;
				}
				DebugInit("0.1",["Sound","Lightning","Projectile"]);
			</script>
		</div>
<!--Home Page (End)-->
		<p id="debugText"> - </p>
	</body>
</html>